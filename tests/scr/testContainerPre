#!/bin/bash

TEST_VOL1=$1
TEST_VOL2=$2

# if using shiftfs, check that the host meets sysbox-runc distro
# requirements (this can be checked from within the test container
# since its docker image may be based from another distro)

if [[ "$SHIFT_UIDS" == "true" ]]; then
  DISTRO=$(lsb_release -i | awk '{print $3}')
  if [ "$DISTRO" != "Ubuntu" ]; then
    printf "\nError: sysboxd uid shifting is only supported on Ubuntu hosts.\n\n"
    exit 1
  fi
fi

# See Makefile for description of test volumes
mkdir -p $TEST_VOL1
mkdir -p $TEST_VOL2
